# üöÄ –°–∏—Å—Ç–µ–º–∞ –ª–∏–Ω—Ç–∏–Ω–≥–∞ Language Exchange Bot V2

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ª–∏–Ω—Ç–∏–Ω–≥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ `golangci-lint` —Å 4 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## üéØ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### 1. **–ú—è–≥–∫–∞—è** (`.golangci-gentle.yml`) ‚≠ê **–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø**

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π
- **–õ–∏–Ω—Ç–µ—Ä—ã**: 100+ –ª–∏–Ω—Ç–µ—Ä–æ–≤ —Å –º—è–≥–∫–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- **Complexity**: 20 (—Ñ—É–Ω–∫—Ü–∏–∏), 30 (–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞—è)
- **–î–ª–∏–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π**: 150 —Å—Ç—Ä–æ–∫
- **–í—Ä–µ–º—è**: ~3-5 –º–∏–Ω—É—Ç
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –Ω–∞—á–∞–ª–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

```bash
make lint-gentle
# –∏–ª–∏
make lint
```

### 2. **–ë—ã—Å—Ç—Ä–∞—è** (`.golangci-fast.yml`)

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- **–õ–∏–Ω—Ç–µ—Ä—ã**: 100+ –±—ã—Å—Ç—Ä—ã—Ö –ª–∏–Ω—Ç–µ—Ä–æ–≤
- **Complexity**: 20
- **–î–ª–∏–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π**: 150 —Å—Ç—Ä–æ–∫
- **–í—Ä–µ–º—è**: ~1-3 –º–∏–Ω—É—Ç—ã
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –±—ã—Å—Ç—Ä—ã–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏

```bash
make lint-fast
```

### 3. **–£–ª—É—á—à–µ–Ω–Ω–∞—è** (`.golangci-enhanced.yml`)

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **–õ–∏–Ω—Ç–µ—Ä—ã**: –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ (enable-all)
- **Complexity**: 15 (—Ñ—É–Ω–∫—Ü–∏–∏), 20 (–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞—è)
- **–î–ª–∏–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π**: 100 —Å—Ç—Ä–æ–∫
- **–í—Ä–µ–º—è**: ~5-10 –º–∏–Ω—É—Ç
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

```bash
make lint-enhanced
```

### 4. **–°—Ç—Ä–æ–≥–∞—è** (`.golangci-strict.yml`)

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: Production –∫–æ–¥
- **–õ–∏–Ω—Ç–µ—Ä—ã**: –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç—Ä–æ–≥–æ—Å—Ç—å)
- **Complexity**: 10 (—Ñ—É–Ω–∫—Ü–∏–∏), 15 (–∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞—è)
- **–î–ª–∏–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π**: 50 —Å—Ç—Ä–æ–∫
- **–í—Ä–µ–º—è**: ~10-15 –º–∏–Ω—É—Ç
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, pre-release

```bash
make lint-strict
```

## üöÄ –ö–æ–º–∞–Ω–¥—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–ø—Ä–∞–≤–∫–∞
make help

# –ú—è–≥–∫–∏–π –ª–∏–Ω—Ç–µ—Ä (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
make lint-gentle
make lint  # –∞–ª–∏–∞—Å

# –ë—ã—Å—Ç—Ä—ã–π –ª–∏–Ω—Ç–µ—Ä
make lint-fast

# –£–ª—É—á—à–µ–Ω–Ω—ã–π –ª–∏–Ω—Ç–µ—Ä
make lint-enhanced

# –°—Ç—Ä–æ–≥–∏–π –ª–∏–Ω—Ç–µ—Ä
make lint-strict
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
make fmt

# Go vet
make vet

# –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (fmt + tidy + lint --fix)
make fix

# –û—á–∏—Å—Ç–∫–∞
make clean

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
make pre-commit
```

## üìä –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ª–∏–Ω—Ç–µ—Ä–æ–≤

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- `gosec` - –ü—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- `errcheck` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- `bodyclose` - –ó–∞–∫—Ä—ã—Ç–∏–µ HTTP body
- `sqlclosecheck` - –ó–∞–∫—Ä—ã—Ç–∏–µ SQL rows

### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- `prealloc` - –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
- `perfsprint` - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `makezero` - –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ make
- `copyloopvar` - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ü–∏–∫–ª–∞

### üé® –°—Ç–∏–ª—å –∫–æ–¥–∞

- `goconst` - –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤–º–µ—Å—Ç–æ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–æ–∫
- `gocyclo` - –¶–∏–∫–ª–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
- `funlen` - –î–ª–∏–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π
- `gocognit` - –ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
- `nestif` - –í–ª–æ–∂–µ–Ω–Ω—ã–µ if

### üìà –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

- `gochecknoinits` - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ init —Ñ—É–Ω–∫—Ü–∏–π
- `gochecknoglobals` - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- `mnd` - –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞
- `unconvert` - –õ–∏—à–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

### üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ

- `misspell` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏–∏
- `whitespace` - –õ–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã
- `staticcheck` - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–º—ã –∑–¥–µ—Å—å)

1. **–ù–∞—á–∞—Ç—å —Å**: `make lint-gentle`
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**
3. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫**: `make lint-enhanced`
4. **–î–ª—è release**: `make lint-strict`

### –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã
make lint-fast

# –ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
make pre-commit

# –ü–µ—Ä–µ–¥ merge –≤ main
make lint-enhanced
```

### CI/CD Pipeline

```bash
# Pull Request
make lint-gentle

# Main branch
make lint-enhanced

# Release branch
make lint-strict
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | Complexity | –î–ª–∏–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π | –ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å |
|--------------|------------|---------------|-----------------------|
| **Gentle**   | < 20       | < 150 —Å—Ç—Ä–æ–∫   | < 30                  |
| **Fast**     | < 20       | < 150 —Å—Ç—Ä–æ–∫   | < 30                  |
| **Enhanced** | < 15       | < 100 —Å—Ç—Ä–æ–∫   | < 20                  |
| **Strict**   | < 10       | < 50 —Å—Ç—Ä–æ–∫    | < 15                  |

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å IDE

### VS Code

–î–æ–±–∞–≤–∏—Ç—å –≤ `.vscode/settings.json`:

```json
{
  "go.lintTool": "golangci-lint",
  "go.lintFlags": [
    "--config=deploy/linter/.golangci-gentle.yml"
  ],
  "go.lintOnSave": "workspace"
}
```

### GoLand

1. **Settings** ‚Üí **Go** ‚Üí **Linters**
2. –í—ã–±—Ä–∞—Ç—å **golangci-lint**
3. –£–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é: `deploy/linter/.golangci-gentle.yml`

## üöÄ Pre-commit Hook

–°–æ–∑–¥–∞—Ç—å `.git/hooks/pre-commit`:

```bash
#!/bin/bash
cd deploy/linter
make pre-commit
```

–°–¥–µ–ª–∞—Ç—å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

```bash
chmod +x .git/hooks/pre-commit
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [golangci-lint –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://golangci-lint.run/)
- [–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ª–∏–Ω—Ç–µ—Ä–æ–≤](https://golangci-lint.run/usage/linters/)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](https://golangci-lint.run/usage/configuration/)
- [Go Code Review Comments](https://github.com/golang/go/wiki/CodeReviewComments)
- [Effective Go](https://golang.org/doc/effective_go.html)

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ª–∏–Ω—Ç–∏–Ω–≥–∞ –æ–∂–∏–¥–∞—é—Ç—Å—è:

- ‚úÖ **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞** –ø–æ–≤—ã—à–∞–µ—Ç—Å—è –Ω–∞ 40%
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** —É–ª—É—á—à–∞–µ—Ç—Å—è –Ω–∞ 60%
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 30%
- ‚úÖ **–°—Ç–∏–ª—å –∫–æ–¥–∞** —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–º
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –õ–∏–Ω—Ç–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å golangci-lint
go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
golangci-lint --version
```

### –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫

–ù–∞—á–Ω–∏—Ç–µ —Å –º—è–≥–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–º:

```bash
make lint-gentle  # –ù–∞—á–∞—Ç—å –∑–¥–µ—Å—å
# –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
make lint-enhanced  # –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å
# –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
make lint-strict  # –§–∏–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
```

### –î–æ–ª–≥–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—ã—Å—Ç—Ä—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```bash
make lint-fast  # 1-3 –º–∏–Ω—É—Ç—ã
```

## üö¶ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å golangci-lint** (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å**: `make lint-gentle`
3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**
4. **–î–æ–±–∞–≤–∏—Ç—å –≤ CI/CD**
5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å pre-commit hook**
6. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º**

