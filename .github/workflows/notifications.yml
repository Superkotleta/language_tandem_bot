name: Notifications

on:
  workflow_run:
    workflows: ["CI/CD Pipeline"]
    types: [completed]

jobs:
  notify:
    runs-on: ubuntu-latest
    if: always()  # Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ Ğ´Ğ°Ğ¶Ğµ Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ñ…
    
    steps:
    - name: Notify on success
      if: ${{ github.event.workflow_run.conclusion == 'success' }}
      uses: appleboy/telegram-action@master
      with:
        to: ${{ secrets.TELEGRAM_CHAT_ID }}
        token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        message: |
          âœ… **CI/CD Success!**
          
          ğŸš€ **Language Exchange Bot**
          ğŸ“Š Branch: `${{ github.event.workflow_run.head_branch }}`
          ğŸ”— Commit: [${{ github.event.workflow_run.head_sha }}](${{ github.event.workflow_run.head_repository.html_url }}/commit/${{ github.event.workflow_run.head_sha }})
          ğŸ‘¤ Author: ${{ github.event.workflow_run.head_commit.author.name }}
          
          ğŸ¯ All tests passed!
          ğŸ“ˆ Ready for deployment
    
    - name: Notify on failure
      if: ${{ github.event.workflow_run.conclusion == 'failure' }}
      uses: appleboy/telegram-action@master
      with:
        to: ${{ secrets.TELEGRAM_CHAT_ID }}
        token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        message: |
          âŒ **CI/CD Failed!**
          
          ğŸš¨ **Language Exchange Bot**
          ğŸ“Š Branch: `${{ github.event.workflow_run.head_branch }}`
          ğŸ”— [View logs](${{ github.event.workflow_run.html_url }})
          
          âš ï¸ Please check the logs and fix the issues
